<div class="container">
	<div class='d-flex align-items-center'>
		<h3><%= @store.name %></h3>
		<%= link_to 'Editar loja', edit_admin_store_path(@store) %>
	</div>

	<div>
		<div class='d-flex justify-content-between align-items-center'>
			<h2>Seus produtos (<%= @products.size %>)</h2>
			<%= link_to 'Criar produto', new_admin_store_product_path(@store), class: 'btn btn-primary' %>
		</div>
		<div class='row justify-content-center'>
			<% @products.each do |product| %>
				<div class="col-sm-3">
					<div class="row justify-content-center">
						<div class="card m-1" style="width: 18rem;">
							<% if product.photo.attached? %>
								<%= cl_image_tag product.photo.key, class: 'card-img-top', alt: 'Falha na imagem', style: 'height: 18rem;' %>
							<% end %>

							 <div class="card-body">
							    <h4 class="card-title text-primary">
							    	<%= product.name %>
							    </h4>
							    <div class="card-text">
							    	<p class='text-truncate'>
							    		<%= product.description %>
							    	</p>
									<div>
										<strong class='text-primary'>Variações: (<%= product.product_variants.size %>)</strong>
									</div>
									<p class='line-clamp-3'>
										<% product.product_variants.each do |product_variant| %>
											<strong><%= product_variant.name %> -</strong> <%= number_to_currency(product.cheapest_product_variant.price, unit: "R$", separator: ",", delimiter: "") %> |
										<% end %>
									</p>
									<p>
										<strong class='text-primary'>Status:</strong> <%= product.is_active ? "Ativo" : "Inativo" %>
									</p>
							    </div>
							    <div class="d-flex justify-content-around">
									<%= link_to 'Editar', edit_admin_store_product_path(@store, product), class: 'btn btn-secondary' %>
							    </div>
							 </div>
						</div>
					</div>
				</div>
			<% end %>
		</div>
	</div>
</div>
